# Code Cite

Generate copyright citations for your code.

Usage
-----

    $ cite -h
    usage: cite [-hvmMTL] [-u code-url]
                [-X author-name]   [-Y year-created]  [-Z author-link]
                [-x modifier-name] [-y year-modified] [-z modifier-link]
                [-l license] [-N notes] [-p prefix]
                [-c config.json] [-t template] [-W pid] [-e eval-string]
    -h      Show usage.
    -v      Be verbose.
    -m      Mark this code as modified.
    -M      Mark this code as not modified.
    -N      Make note of something in the message. 
    -T      List templates
    -L      List licenses
    -p      Prefix each line of template with 'prefix', mainly used for alignment.

Example
-------

1. Generate a citation.

Generate a citation from the command line.

    $ cite -u http://stackoverflow.com/questions/3151702/discriminated-union-in-c-sharp
    /* Original code Copyright (c) 2010 Chris Fewtrell[1]
      Licensed under the CC-BY-SA 3.0[2]
      
      Original code posted to this question[3] on stackoverflow.com.
      This comment generated by code-cite[4].
      
      [1]: https://stackoverflow.com/users/132648/chris-fewtrell
      [2]: http://creativecommons.org/licenses/by-sa/3.0/
      [3]: https://stackoverflow.com/questions/3151702/discriminated-union-in-c
      [4]: https://github.com/shanecelis/code-cite
    */
    

2. Add citations to a file.

If the a file `Union.cs` has lines that look like this:

    //$ cite -u http://stackoverflow.com/questions/3151702/discriminated-union-in-c-sharp

The citation will substitute that line by running the following command:

    $ cite-inline add Union.cs
    warning: Answer not specified for 5 questions; assuming first answer was used.
    warning: Used cache for 15 stackexchange API requests.

Backends
---------

The backends are specialized to use different sources of information to make citations 
not require much more than a URL.

- stackoverflow
- github
- twitter

For the example shown above the `stackoverflow` backend emits:

    question_link="https://stackoverflow.com/questions/3151702/discriminated-union-in-c"
    question_title="Discriminated union in C#"
    answer_link=""
    answer_id=""
    question_id="3151702"
    author_name="Chris Fewtrell"
    author_link="https://stackoverflow.com/users/132648/chris-fewtrell"
    year_created="2010"
    license="${license:-ccbysa}"
    
This output is then sourced by the `cite` command.


Templates
----------

[Moustache](https://mustache.github.io) templates are used to generate the citation. Here is a simple one:

    /* 
      Original code Copyright (c) {{year_created}} {{author_name}}[{{inline_link}}]
      {{#modifier_name}}
      Modified code Copyright (c) {{year_modified}} {{modifier_name}}[{{inline_link}}]
      {{/modifier_name}}
      Licensed under the {{license_name}}[{{inline_link}}]

      This comment generated by cite-stackoverflow[{{inline_link}}].

      [{{ref_link}}]: {{author_link}}
      {{#modifier_name}}
      [{{ref_link}}]: {{modifier_link}}
      {{/modifier_name}}
      [{{ref_link}}]: {{license_link}}
      [{{ref_link}}]: {{cite_stackoverflow_link}}
    */


Dependencies
------------
- [bash](https://www.gnu.org/software/bash/)
- [curl](https://curl.haxx.se)
- [jq](https://stedolan.github.io/jq/)
- [mo](https://github.com/tests-always-included/mo)
- [perl](https://www.perl.org)
